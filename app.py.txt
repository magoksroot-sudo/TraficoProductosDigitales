import streamlit as st

st.title("ğŸ“Š Calculadora de KPIs de Marketing Digital")

st.write("Introduce tus datos y te mostrarÃ© tus KPIs con anÃ¡lisis y recomendaciones.")

# Inputs de usuario
visitas = st.number_input("NÃºmero de visitas", min_value=1, value=10000)
ventas = st.number_input("NÃºmero de ventas", min_value=0, value=100)
gasto_ads = st.number_input("Gasto en publicidad ($)", min_value=0.0, value=500.0)
precio = st.number_input("Precio del producto ($)", min_value=1.0, value=50.0)
costos_fijos = st.number_input("Costos fijos mensuales ($)", min_value=0.0, value=1000.0)
costos_variables = st.number_input("Costos variables por unidad ($)", min_value=0.0, value=10.0)

st.subheader("ğŸ” Resultados de tus KPIs")

# 1. Tasa de conversiÃ³n
tasa_conversion = (ventas / visitas) * 100
st.write(f"**Tasa de conversiÃ³n:** {tasa_conversion:.2f}%")
if tasa_conversion < 1:
    st.error("âŒ EstÃ¡s por debajo del promedio (1-3%). Revisa tu oferta o embudo.")
elif tasa_conversion <= 3:
    st.success("âœ… EstÃ¡s dentro del promedio (1-3%). Bien hecho.")
else:
    st.success("ğŸš€ Excelente, tu tasa de conversiÃ³n es muy alta.")

# 2. CPA
cpa = gasto_ads / ventas if ventas > 0 else 0
st.write(f"**CPA (Costo por adquisiciÃ³n):** ${cpa:.2f}")
if cpa >= precio:
    st.error("âŒ Tu CPA es igual o mayor que tu precio. EstÃ¡s perdiendo dinero.")
else:
    st.success("âœ… Tu CPA es rentable.")

# 3. ROAS
ingresos = ventas * precio
roas = ingresos / gasto_ads if gasto_ads > 0 else 0
st.write(f"**ROAS:** {roas:.2f}x")
if roas < 1:
    st.error("âŒ EstÃ¡s perdiendo dinero en tus anuncios.")
elif roas < 3:
    st.warning("âš ï¸ Rentable, pero se puede optimizar.")
else:
    st.success("ğŸš€ Excelente ROAS, sigue escalando.")

# 4. Punto de equilibrio
margen_unitario = precio - costos_variables
ventas_necesarias = costos_fijos / margen_unitario if margen_unitario > 0 else 0
st.write(f"**Punto de equilibrio:** {ventas_necesarias:.0f} ventas necesarias")
if ventas >= ventas_necesarias:
    st.success("âœ… Ya estÃ¡s en punto de equilibrio o en ganancias.")
else:
    st.warning("âš ï¸ AÃºn no alcanzas el punto de equilibrio.")

st.info("ğŸ’¡ Buena pregunta. Medir tus KPIs es fundamental para saber si avanzas hacia tu objetivo de vender productos digitales.")
