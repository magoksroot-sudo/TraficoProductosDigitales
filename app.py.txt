import streamlit as st

st.title("📊 Calculadora de KPIs de Marketing Digital")

st.write("Introduce tus datos y te mostraré tus KPIs con análisis y recomendaciones.")

# Inputs de usuario
visitas = st.number_input("Número de visitas", min_value=1, value=10000)
ventas = st.number_input("Número de ventas", min_value=0, value=100)
gasto_ads = st.number_input("Gasto en publicidad ($)", min_value=0.0, value=500.0)
precio = st.number_input("Precio del producto ($)", min_value=1.0, value=50.0)
costos_fijos = st.number_input("Costos fijos mensuales ($)", min_value=0.0, value=1000.0)
costos_variables = st.number_input("Costos variables por unidad ($)", min_value=0.0, value=10.0)

st.subheader("🔍 Resultados de tus KPIs")

# 1. Tasa de conversión
tasa_conversion = (ventas / visitas) * 100
st.write(f"**Tasa de conversión:** {tasa_conversion:.2f}%")
if tasa_conversion < 1:
    st.error("❌ Estás por debajo del promedio (1-3%). Revisa tu oferta o embudo.")
elif tasa_conversion <= 3:
    st.success("✅ Estás dentro del promedio (1-3%). Bien hecho.")
else:
    st.success("🚀 Excelente, tu tasa de conversión es muy alta.")

# 2. CPA
cpa = gasto_ads / ventas if ventas > 0 else 0
st.write(f"**CPA (Costo por adquisición):** ${cpa:.2f}")
if cpa >= precio:
    st.error("❌ Tu CPA es igual o mayor que tu precio. Estás perdiendo dinero.")
else:
    st.success("✅ Tu CPA es rentable.")

# 3. ROAS
ingresos = ventas * precio
roas = ingresos / gasto_ads if gasto_ads > 0 else 0
st.write(f"**ROAS:** {roas:.2f}x")
if roas < 1:
    st.error("❌ Estás perdiendo dinero en tus anuncios.")
elif roas < 3:
    st.warning("⚠️ Rentable, pero se puede optimizar.")
else:
    st.success("🚀 Excelente ROAS, sigue escalando.")

# 4. Punto de equilibrio
margen_unitario = precio - costos_variables
ventas_necesarias = costos_fijos / margen_unitario if margen_unitario > 0 else 0
st.write(f"**Punto de equilibrio:** {ventas_necesarias:.0f} ventas necesarias")
if ventas >= ventas_necesarias:
    st.success("✅ Ya estás en punto de equilibrio o en ganancias.")
else:
    st.warning("⚠️ Aún no alcanzas el punto de equilibrio.")

st.info("💡 Buena pregunta. Medir tus KPIs es fundamental para saber si avanzas hacia tu objetivo de vender productos digitales.")
